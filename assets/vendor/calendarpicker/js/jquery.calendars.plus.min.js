!function(w){"use strict";w.extend(w.calendars.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),w.calendars.local=w.calendars.regionalOptions[""],w.extend(w.calendars.cdate.prototype,{formatDate:function(a,e){return"string"!=typeof a&&(e=a,a=""),this._calendar.formatDate(a||"",this,e)}}),w.extend(w.calendars.baseCalendar.prototype,{UNIX_EPOCH:w.calendars.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:86400,TICKS_EPOCH:w.calendars.instance().jdEpoch,TICKS_PER_DAY:864e9,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(r,a,e){if("string"!=typeof r&&(e=a,a=r,r=""),!a)return"";if(a.calendar()!==this)throw w.calendars.local.invalidFormat||w.calendars.regionalOptions[""].invalidFormat;r=r||this.local.dateFormat;for(var t=(e=e||{}).dayNamesShort||this.local.dayNamesShort,n=e.dayNames||this.local.dayNames,o=e.monthNamesShort||this.local.monthNamesShort,s=e.monthNames||this.local.monthNames,e=e.localNumbers||this.local.localNumbers,i=function(a,e){for(var t=1;m+t<r.length&&r.charAt(m+t)===a;)t++;return m+=t-1,1<Math.floor(t/(e||1))},c=function(a,e,t,r){var n=""+e;if(i(a,r))for(;n.length<t;)n="0"+n;return n},l=function(a,e,t,r){return(i(a)?r:t)[e]},d=e&&this.local.digits?this.local.digits:function(a){return a},h="",y=!1,m=0;m<r.length;m++)if(y)"'"!==r.charAt(m)||i("'")?h+=r.charAt(m):y=!1;else switch(r.charAt(m)){case"d":h+=d(c("d",a.day(),2));break;case"D":h+=l("D",a.dayOfWeek(),t,n);break;case"o":h+=c("o",a.dayOfYear(),3);break;case"w":h+=c("w",a.weekOfYear(),2);break;case"m":h+=d(c("m",a.month(),2));break;case"M":h+=l("M",a.month()-this.minMonth,o,s);break;case"y":h+=d(i("y",2)?a.year():(a.year()%100<10?"0":"")+a.year()%100);break;case"Y":i("Y",2),h+=a.formatYear();break;case"J":h+=a.toJD();break;case"@":h+=(a.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":h+=(a.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":i("'")?h+="'":y=!0;break;default:h+=r.charAt(m)}return h},parseDate:function(r,s,a){if(null==s)throw w.calendars.local.invalidArguments||w.calendars.regionalOptions[""].invalidArguments;if(""===(s="object"==typeof s?s.toString():s+""))return null;r=r||this.local.dateFormat;for(var e="string"!=typeof(e=(a=a||{}).shortYearCutoff||this.shortYearCutoff)?e:this.today().year()%100+parseInt(e,10),t=a.dayNamesShort||this.local.dayNamesShort,n=a.dayNames||this.local.dayNames,o=a.monthNamesShort||this.local.monthNamesShort,i=a.monthNames||this.local.monthNames,c=-1,l=-1,d=-1,h=-1,y=-1,m=!1,u=!1,f=function(a,e){for(var t=1;k+t<r.length&&r.charAt(k+t)===a;)t++;return k+=t-1,1<Math.floor(t/(e||1))},p=function(a,e){e=f(a,e),a=[2,3,e?4:2,e?4:2,10,11,20]["oyYJ@!".indexOf(a)+1],a=new RegExp("^-?\\d{1,"+a+"}"),a=s.substring(A).match(a);if(!a)throw(w.calendars.local.missingNumberAt||w.calendars.regionalOptions[""].missingNumberAt).replace(/\{0\}/,A);return A+=a[0].length,parseInt(a[0],10)},g=this,b=function(a,e,t,r){for(var n=f(a,r)?t:e,o=0;o<n.length;o++)if(s.substr(A,n[o].length).toLowerCase()===n[o].toLowerCase())return A+=n[o].length,o+g.minMonth;throw(w.calendars.local.unknownNameAt||w.calendars.regionalOptions[""].unknownNameAt).replace(/\{0\}/,A)},D=function(){if(s.charAt(A)!==r.charAt(k))throw(w.calendars.local.unexpectedLiteralAt||w.calendars.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,A);A++},A=0,k=0;k<r.length;k++)if(u)"'"!==r.charAt(k)||f("'")?D():u=!1;else switch(r.charAt(k)){case"d":h=p("d");break;case"D":b("D",t,n);break;case"o":y=p("o");break;case"w":p("w");break;case"m":d=p("m");break;case"M":d=b("M",o,i);break;case"y":var C=k,m=!f("y",2),k=C,l=p("y",2);break;case"Y":l=p("Y",2);break;case"J":c=p("J")+.5,"."===s.charAt(A)&&(A++,p("J"));break;case"@":c=p("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":c=p("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":A=s.length;break;case"'":f("'")?D():u=!0;break;default:D()}if(A<s.length)throw w.calendars.local.unexpectedText||w.calendars.regionalOptions[""].unexpectedText;if(-1===l?l=this.today().year():l<100&&m&&(l+=-1===e?1900:this.today().year()-this.today().year()%100-(l<=e?0:100)),-1<y){d=1,h=y;for(var N=this.daysInMonth(l,d);N<h;N=this.daysInMonth(l,d))d++,h-=N}return-1<c?this.fromJD(c):this.newDate(l,d,h)},determineDate:function(a,e,n,o,s){n&&"object"!=typeof n&&(s=o,o=n,n=null),"string"!=typeof o&&(s=o,o="");var i=this;return e=e?e.newDate():null,a=null==a?e:"string"==typeof a?function(a){try{return i.parseDate(o,a,s)}catch(a){}for(var e=((a=a.toLowerCase()).match(/^c/)&&n?n.newDate():null)||i.today(),t=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,r=t.exec(a);r;)e.add(parseInt(r[1],10),r[2]||"d"),r=t.exec(a);return e}(a):"number"==typeof a?isNaN(a)||a===1/0||a===-1/0?e:i.today().add(a,"d"):i.newDate(a)}})}(jQuery);